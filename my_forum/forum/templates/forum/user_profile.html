{% extends 'forum/base.html' %}
{% load static %}
{% block extra_head_content %}
<div class="container" style="margin-top: 35px">
    <ul class="nav nav-tabs" role="tablist" id="myTabs">
        <li role="presentation" class="active"><a href="#profile" aria-controls="profile" role="tab"
                                                  data-toggle="tab">Profile</a>
        <li role="presentation" class=""><a href="#history" aria-controls="history" role="tab" data-toggle="tab">Posts
            history</a>
        </li>
    </ul>
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="profile">
                <form enctype="multipart/form-data" action="#" method="post">
                    {% csrf_token %}
                    {% for field in profile %}
                        <label>{{ field.label }}</label>
                        {% if field.errors %}
                            <strong style="color: red">{{ field.errors }}</strong>
                        {% endif %}
                        {{ field }}
                    {% endfor %}
                    {% if form.errors %}<strong style="color: red">{{ form.non_field_errors }}</strong>{% endif %}
                    <label>
                        <br>
                        <input type="hidden" name="next" value="{{ next }}"/>
                        <input class="button small" type="submit" value="Update"/>
                    </label>
                </form>
        </div>
        <div role="tabpanel" class="tab-pane" id="history">
            {% if posts %}
                <h5>
                    <a class="btn btn-primary" id="btn_posts">
                        Posted <span class="badge">{{ posts|length }}</span>
                    </a>
                </h5>
                {% for post in posts %}
                    <div class="tab-pane fade" id="posts">
                        <table class="table table-bordered">
                        <tbody>
                        <tr>
                        <td>
                            <h5>
                                <span class="label label-danger">{{ user.email }}</span>
                                <span class="label label-danger">{{ post.topic.forum.title }}</span>
                                <span class="label label-primary">{{ post.topic.title }}</span>
                            </h5>
                        </td>
                        <td width="80%">{{ post.body }}</td>
                {% endfor %}
                {% else %}
                    <span class="label label-danger">None messages were posted by {{ user.username | upper }}</span>
            {% endif %}

            </tr>
            </tbody>
            </table>
        </div>
    </div>
</div>
</div>
{% endblock %}